#include <Wire.h>
#include <LiquidCrystal_I2C.h>

// Initialize the LCD on I2C address 0x27 for a 16x2 display
LiquidCrystal_I2C lcd(0x27, 16, 2);

// Define the pin the pushbutton is connected to
const int buttonPin = 2;

// Variable to store the number of button presses
int buttonCount = 0;

// Variables for button debouncing
long lastDebounceTime = 0;
long debounceDelay = 50; // 50 milliseconds

void setup() {
  // Initialize the LCD and turn on the backlight
  lcd.init();
  lcd.backlight();

  // Set the button pin as an input with an internal pull-up resistor
  pinMode(buttonPin, INPUT_PULLUP);

  // Display the initial message
  lcd.setCursor(0, 0);
  lcd.print("Button Counter");
  updateCounter();
}

void loop() {
  // Read the state of the button
  int buttonState = digitalRead(buttonPin);

  // Check if the button is pressed (LOW) and if enough time has passed
  // since the last registered press to ignore noise (debouncing).
  if (buttonState == LOW && (millis() - lastDebounceTime) > debounceDelay) {
    // Increment the counter
    buttonCount++;
    updateCounter();

    // Update the time of the last press
    lastDebounceTime = millis();
  }
}

// A helper function to print the current count to the LCD
void updateCounter() {
  lcd.setCursor(0, 1);
  lcd.print("Count: ");
  lcd.print(buttonCount);
  // Add extra spaces to clear any old digits if the number gets smaller
  lcd.print("   "); 
}